# 実装タスク

## タスク概要

本タスクは、投資学習支援モバイルアプリケーション「investment-news-app」の実装を、requirements.mdの12要件とdesign.mdのアーキテクチャ設計に基づいて段階的に進めるものです。MVVM + Feature-based + Repositoryパターンを採用し、React Native（Expo）フロントエンド、Vercel Serverless Functionsバックエンド、Firebase Firestoreデータベースを統合します。

**実装範囲**:

- フロントエンド: ニュース・用語表示機能（MVVM構造）
- バックエンド: 日次バッチ処理（ニュース取得・要約、用語生成）
- データ層: Firestoreスキーマ、キャッシュ管理、エラーハンドリング
- テスト: 単体テスト、統合テスト、E2Eテスト

**実装しない範囲**:

- ユーザー認証・ログイン機能（v1.0では対象外）
- デプロイメント自動化（手動デプロイ）
- ドキュメント作成（コード内コメントのみ）

**想定変更行数の凡例**:

- 各タスクに `(~XXX行)` で想定変更行数（実装+テスト）を記載
- 目標: 200〜400行/タスク（レビューしやすいサイズ）

## タスク実行時のルール

- 新しいブランチを発行・チェックアウトをしてからタスクに着手すること。

## タスク一覧

### 1. プロジェクト初期セットアップ

- [x] 1.1 (P) モノレポ構成とExpoプロジェクト初期化
  - ルートディレクトリに`mobile/`（React Native Expo）と`backend/`（Vercel Functions）のモノレポ構造を構築する
  - Expo SDK 53以降でReact Nativeプロジェクトを初期化し、New Architecture対応を有効化する
  - TypeScript構成ファイルを設定し、厳密な型チェックを有効化する
  - ESLintとPrettierを設定し、コード品質基準を確立する
  - `.gitignore`に環境変数ファイルとビルド成果物を追加する
  - _Requirements: 11.1, 11.4, 12.1_

- [x] 1.2 (P) Firebase Firestore接続設定
  - Firebase Consoleでプロジェクトを作成し、Firestoreデータベースを有効化する
  - モバイルアプリ向けに`@react-native-firebase/app`と`@react-native-firebase/firestore`をインストールする
  - iOS向けに`GoogleService-Info.plist`を配置し、Firestore初期化コードを実装する
  - オフライン永続化を有効化し、キャッシュサイズを設定する
  - Firestore接続テストを実施し、読み書き動作を確認する
  - _Requirements: 12.3, 2.5_

- [x] 1.3 (P) Vercelプロジェクト初期化とFirebase Admin SDK設定
  - Vercel CLIをインストールし、プロジェクトをVercelアカウントにリンクする
  - `backend/`ディレクトリに`vercel.json`を作成し、Serverless Functions設定を定義する
  - Firebase Admin SDKをインストールし、サービスアカウント認証を設定する
  - 環境変数（Firebase秘密鍵、NewsAPIキー、Claude APIキー等）をVercel環境変数として登録する
  - ヘルスチェック用のAPIエンドポイントを実装し、Firestore接続を検証する
  - _Requirements: 12.2, 12.3, 9.1, 9.2_

### 2. 共通インフラストラクチャ実装

- [x] 2.1 (P) Firestoreデータモデル定義とスキーマ実装
  - `news`コレクション（日付をドキュメントID、世界・日本ニュースをフィールド）のスキーマを定義する
  - `terms`コレクション（日付をドキュメントID、3つの用語を配列フィールド）のスキーマを定義する
  - `terms_history`コレクション（全配信済み用語の履歴を保持）のスキーマを定義する
  - `metadata/batch`ドキュメント（newsLastUpdated, termsLastUpdatedタイムスタンプ）のスキーマを定義する
  - 各ドキュメントが1MB以下になるよう文字数制限を設計する
  - Firestoreインデックス設定を作成し、日付クエリのパフォーマンスを最適化する
  - _Requirements: 3.3, 1.6, 4.5, 4.6_

- [x] 2.2 (P) エラーハンドリング共通機能実装
  - ネットワークエラー、API障害、Firestore接続エラーを分類する例外型を定義する
  - エラーログをFirestore `error_logs`コレクションに記録する機能を実装する
  - リトライロジック（指数バックオフ、最大3回）を実装する
  - エラーメッセージのユーザー向け表示文言を定義する（日本語）
  - エラー発生時にスタックトレースと関連情報を詳細ログに記録する
  - _Requirements: 1.7, 7.5, 8.3, 8.5, 11.3_

- [x] 2.3 (P) キャッシュ管理システム実装
  - モバイルアプリ用のローカルストレージキャッシュ（AsyncStorage）を実装する
  - キャッシュキー生成ロジック（日付ベース）を実装する
  - Firestoreの`metadata/batch`からlastUpdatedを取得し、キャッシュのcachedAtと比較する機能を実装する
  - lastUpdated > cachedAtの場合にキャッシュを無効化し、最新データを取得する機能を実装する
  - オフライン時はメタデータチェックをスキップし、キャッシュデータを1秒以内に取得する機能を実装する
  - 期限切れキャッシュのクリア機能を実装する
  - _Requirements: 2.5, 2.6, 5.4, 7.2_

### 3. バックエンド - Claude API基盤

- [x] 3.1 Claude APIクライアント導入と初期化 (~200行)
  - Claude API（Anthropic）のクライアントライブラリをインストールする
  - APIクライアントの初期化コードを実装する
  - Haikuモデルをデフォルトモデルとして設定する
  - 基本的な接続テストを実装する
  - _Requirements: 12.5_

- [x] 3.2 APIキー環境変数読み込みとHTTPS接続 (~150行)
  - APIキーを環境変数から安全に読み込む機能を実装する
  - HTTPS通信の設定を確認・実装する
  - APIキー未設定時のエラーハンドリングを実装する
  - _Requirements: 9.1, 9.3, 9.4_

- [x] 3.3 トークン使用量監視機能 (~200行)
  - API呼び出しごとのトークン使用量を記録する機能を実装する
  - 累積トークン使用量をログに出力する機能を実装する
  - トークン使用量の型定義を作成する
  - _Requirements: 10.3_

- [x] 3.4 レート制限ハンドリング (~200行)
  - API呼び出しのレート制限検出機能を実装する
  - レート制限時の待機・リトライロジックを実装する
  - レート制限エラーの型定義を作成する
  - _Requirements: 12.5_

- [x] 3.5 AIサービスエラーハンドリング (~200行)
  - タイムアウトエラーのハンドリングを実装する
  - API障害時のエラーハンドリングを実装する
  - エラー発生時のログ記録機能を実装する
  - _Requirements: 8.5, 11.3_

### 4. バックエンド - ニュース要約機能

- [x] 4.1 英語ニュース翻訳・要約プロンプト (~200行)
  - 複数の英語ニュース記事を統合し、日本語で要約するプロンプトを実装する
  - プロンプトテンプレートを定義する
  - 約2000文字の出力を指示するプロンプトパラメータを設定する
  - _Requirements: 1.4, 1.5_

- [x] 4.2 日本語ニュース要約プロンプト (~150行)
  - 日本語ニュース記事を要約するプロンプトを実装する
  - プロンプトテンプレートを定義する
  - 約2000文字の出力を指示するプロンプトパラメータを設定する
  - _Requirements: 1.4_

- [x] 4.3 要約レスポンスパース機能 (~150行)
  - Claude APIレスポンスをパースする機能を実装する
  - 要約文を抽出する機能を実装する
  - パース結果の型定義を作成する
  - _Requirements: 1.4_

- [x] 4.4 要約文字数検証機能 (~150行)
  - 要約文の文字数を検証する機能を実装する
  - 1800〜2200文字の範囲内かチェックする
  - 範囲外の場合の警告ログを実装する
  - _Requirements: 1.4_

- [x] 4.5 要約失敗時フォールバック処理 (~200行)
  - 要約失敗時のリトライ処理を実装する
  - リトライ上限到達時のエラー記録を実装する
  - フォールバック時の通知機能を実装する
  - _Requirements: 1.7_

### 5. バックエンド - 用語生成機能

- [x] 5.1 用語生成プロンプト基本実装 (~200行)
  - 投資・金融用語を1つ生成するプロンプトを実装する
  - 約500文字の解説を生成するプロンプトパラメータを設定する
  - プロンプトテンプレートを定義する
  - _Requirements: 4.1, 4.2_

- [x] 5.2 難易度指定機能 (~150行)
  - 初級・中級・上級の難易度を指定可能なパラメータを実装する
  - 難易度に応じたプロンプト調整機能を実装する
  - 難易度の型定義を作成する
  - _Requirements: 4.4_

- [x] 5.3 用語レスポンスパース機能 (~150行)
  - Claude APIレスポンスから用語名を抽出する機能を実装する
  - 解説文を抽出する機能を実装する
  - パース結果の型定義を作成する
  - _Requirements: 4.1_

- [x] 5.4 用語文字数検証機能 (~150行)
  - 解説文の文字数を検証する機能を実装する
  - 400〜600文字の範囲内かチェックする
  - 範囲外の場合の警告ログを実装する
  - _Requirements: 4.2_

- [x] 5.5 用語生成失敗時フォールバック処理 (~150行)
  - 用語生成失敗時のリトライ処理を実装する
  - リトライ上限到達時のエラー記録を実装する
  - _Requirements: 1.7_

### 6. バックエンド - NewsAPI統合

- [x] 6.1 NewsAPIクライアント導入と設定 (~150行)
  - NewsAPI v2クライアントライブラリをインストールする
  - APIクライアントの初期化コードを実装する
  - APIキーの環境変数読み込みを実装する
  - _Requirements: 1.2_

- [x] 6.2 世界ニュース取得機能 (~200行)
  - `business`カテゴリで世界のニュース記事を取得するAPIリクエストを実装する
  - 取得件数の設定を実装する
  - 言語・地域フィルターを設定する
  - _Requirements: 1.2_

- [x] 6.3 NewsAPIレスポンスパース機能 (~150行)
  - APIレスポンスから記事タイトルを抽出する機能を実装する
  - 記事説明・本文を抽出する機能を実装する
  - パース結果の型定義を作成する
  - _Requirements: 1.2_

- [x] 6.4 NewsAPI無料枠制御機能 (~150行)
  - 1日1回のみ実行する制御を実装する
  - 無料枠（100リクエスト/日）の使用状況を記録する機能を実装する
  - 枠超過時の警告ログを実装する
  - _Requirements: 10.2_

- [x] 6.5 NewsAPIエラーハンドリング (~200行)
  - NewsAPI障害時のエラーハンドリングを実装する
  - エラーログ記録機能を実装する
  - タイムアウト設定を実装する
  - _Requirements: 8.5_

### 7. バックエンド - Google News RSS統合

- [x] 7.1 RSSパーサーライブラリ導入 (~100行)
  - RSSパーサーライブラリをインストールする
  - パーサーの初期化コードを実装する
  - _Requirements: 1.3_

- [x] 7.2 日本経済ニュースRSS取得機能 (~200行)
  - Google News RSSから日本の経済・金融ニュースを取得する機能を実装する
  - RSSフィードURLを設定する
  - 取得件数の制御を実装する
  - _Requirements: 1.3_

- [x] 7.3 RSSフィードパース機能 (~150行)
  - RSSフィードをパースする機能を実装する
  - 記事タイトル、説明、リンクを抽出する機能を実装する
  - パース結果の型定義を作成する
  - _Requirements: 1.3_

- [x] 7.4 RSS取得タイムアウト・エラーハンドリング (~200行)
  - RSS取得タイムアウト設定（30秒）を実装する
  - RSS取得失敗時のエラーハンドリングを実装する
  - エラーログ記録機能を実装する
  - _Requirements: 8.5_

### 8. バックエンド - ニュースバッチ処理

- [x] 8.1 ニュースバッチAPIエンドポイント基盤 (~200行)
  - `/api/batch/news`エンドポイントを実装する
  - リクエスト認証（CRON_SECRET）を実装する
  - エンドポイントの基本レスポンス構造を定義する
  - _Requirements: 1.1_

- [x] 8.2 並列ニュース取得オーケストレーション (~200行)
  - NewsAPIとGoogle News RSSを並列実行する機能を実装する
  - 両方の結果を統合する機能を実装する
  - 部分的な取得成功時のハンドリングを実装する
  - _Requirements: 1.2, 1.3_

- [x] 8.3 AI要約処理統合 (~200行)
  - 世界ニュースをAIサービスで翻訳+要約する処理を統合する
  - 日本ニュースをAIサービスで要約する処理を統合する
  - 要約結果の検証を実装する
  - _Requirements: 1.4, 1.5_

- [x] 8.4 Firestoreニュース保存機能 (~200行)
  - 要約結果をFirestore `news`コレクションに保存する機能を実装する
  - 今日の日付をドキュメントIDとして使用する
  - 保存成功・失敗のログを実装する
  - _Requirements: 1.6_

- [x] 8.5 ニュースメタデータ更新機能 (~150行)
  - バッチ完了時に`metadata/batch.newsLastUpdated`を更新する機能を実装する
  - タイムスタンプの形式を定義する
  - 更新成功・失敗のログを実装する
  - _Requirements: 1.6_

- [x] 8.6 ニュースバッチタイムアウト制御 (~150行)
  - バッチ処理が5分以内に完了するようタイムアウト制御を実装する
  - タイムアウト時のエラーハンドリングを実装する
  - 処理時間のログを実装する
  - _Requirements: 1.8_

### 9. バックエンド - ニュースバッチエラー処理

- [x] 9.1 ニュースバッチリトライロジック (~200行)
  - バッチ処理失敗時に最大3回リトライする機能を実装する
  - リトライ間隔を指数バックオフで設定する
  - リトライ回数のログを実装する
  - _Requirements: 8.3_

- [x] 9.2 ニュースステップ別エラーログ記録 (~200行)
  - ニュース取得ステップでのエラーログを実装する
  - AI処理ステップでのエラーログを実装する
  - Firestore保存ステップでのエラーログを実装する
  - _Requirements: 8.5, 11.3_

- [x] 9.3 ニュース部分成功検出・ハンドリング (~200行)
  - 世界ニュースのみ成功の検出機能を実装する
  - 日本ニュースのみ成功の検出機能を実装する
  - 部分成功時の保存・通知機能を実装する
  - _Requirements: 8.2_

- [x] 9.4 ニュース最終失敗時詳細ログ保存 (~150行)
  - 最終的な失敗時にFirestore `error_logs`に詳細ログを保存する機能を実装する
  - エラー詳細の構造を定義する
  - _Requirements: 8.5_

### 10. バックエンド - 用語重複チェック

> **スキップ**: プロンプトレベルの `excludeTerms` による重複防止で十分と判断。運用後に重複が発生した場合に再検討する。実装コードは `feat/task-10-term-duplicate-check` ブランチに保存済み。

- [~] 10.1 配信済み用語取得機能 (~200行) - スキップ
  - Firestore `terms_history`コレクションから過去30日分の配信済み用語を取得する機能を実装する
  - 日付範囲クエリを実装する
  - 取得結果の型定義を作成する
  - _Requirements: 4.3_

- [~] 10.2 重複判定ロジック (~150行) - スキップ
  - 新規生成された用語が配信済み用語リストに含まれるかチェックする機能を実装する
  - 部分一致・完全一致の判定ロジックを実装する
  - _Requirements: 4.3, 5.5_

- [~] 10.3 再生成リクエスト機能 (~200行) - スキップ
  - 重複検出時にAIサービスへ再生成リクエストを送信する機能を実装する
  - 再生成試行回数の上限（最大5回）を設定する
  - 再生成履歴のログを実装する
  - _Requirements: 4.3_

- [~] 10.4 重複チェックエラーハンドリング (~150行) - スキップ
  - 重複チェック失敗時のエラーハンドリングを実装する
  - エラーログ記録機能を実装する
  - _Requirements: 8.5_

### 11. バックエンド - 用語バッチ処理

- [x] 11.1 用語バッチAPIエンドポイント基盤 (~200行)
  - `/api/batch/terms`エンドポイントを実装する
  - リクエスト認証（CRON_SECRET）を実装する
  - エンドポイントの基本レスポンス構造を定義する
  - _Requirements: 1.1_

- [x] 11.2 3用語生成オーケストレーション (~200行)
  - AIサービスで初級・中級・上級の難易度を混在させた3つの用語を生成する機能を実装する
  - 各用語の生成を順次実行する
  - 生成結果の統合機能を実装する
  - _Requirements: 4.1, 4.4_

- [~] 11.3 用語重複チェック統合 (~150行) - スキップ（Task 10スキップに伴い不要）
  - 各用語について重複チェックを実施する機能を統合する
  - 重複時の再生成フローを実装する
  - _Requirements: 4.3_

- [x] 11.4 Firestore用語保存機能 (~200行)
  - 生成された3つの用語をFirestore `terms`コレクションに保存する機能を実装する
  - 今日の日付をドキュメントIDとして使用する
  - 保存成功・失敗のログを実装する
  - _Requirements: 4.5_

- [x] 11.5 用語履歴保存機能 (~150行)
  - 配信済み用語を`terms_history`コレクションに追加する機能を実装する
  - 全履歴を保持する設計を実装する
  - _Requirements: 4.6_

- [x] 11.6 用語メタデータ更新機能 (~150行)
  - バッチ完了時に`metadata/batch.termsLastUpdated`を更新する機能を実装する
  - タイムスタンプの形式を定義する
  - 更新成功・失敗のログを実装する
  - _Requirements: 4.5_

### 12. バックエンド - 用語バッチエラー処理

- [x] 12.1 用語バッチリトライロジック (~200行)
  - バッチ処理失敗時に最大3回リトライする機能を実装する
  - リトライ間隔を指数バックオフで設定する
  - リトライ回数のログを実装する
  - _Requirements: 8.3_

- [x] 12.2 用語ステップ別エラーログ記録 (~200行)
  - 用語生成ステップでのエラーログを実装する
  - 重複チェックステップでのエラーログを実装する
  - Firestore保存ステップでのエラーログを実装する
  - _Requirements: 8.5, 11.3_

- [x] 12.3 用語部分成功検出・ハンドリング (~200行)
  - 2つの用語のみ生成成功の検出機能を実装する
  - 1つの用語のみ生成成功の検出機能を実装する
  - 部分成功時の保存・通知機能を実装する
  - _Requirements: 8.2_

- [x] 12.4 用語最終失敗時詳細ログ保存 (~150行)
  - 最終的な失敗時にFirestore `error_logs`に詳細ログを保存する機能を実装する
  - エラー詳細の構造を定義する
  - _Requirements: 8.5_

### 13. バックエンド - Vercel Cron Jobs

- [x] 13.1 Cron設定とスケジュール定義 (~150行)
  - `vercel.json`にCron設定を追加する
  - 毎日8:00 JSTにニュース・用語バッチを実行するスケジュールを設定する
  - Cron設定の検証を実施する
  - _Requirements: 12.4, 1.1, 3.4_

- [x] 13.2 CRON_SECRET認証機構 (~200行)
  - CRON_SECRET環境変数を生成する
  - 不正アクセスを防止する認証機構を実装する
  - 認証失敗時のエラーレスポンスを実装する
  - _Requirements: 9.1_

- [x] 13.3 Cronタイムアウト・ログ設定 (~150行)
  - Cron Jobsのタイムアウト設定（最大5分）を設定する
  - Cron Jobsの実行ログをVercel Logsで確認可能にする
  - タイムアウト時のエラーハンドリングを実装する
  - _Requirements: 1.8_

### 14. フロントエンド - Firestoreクライアント

- [x] 14.1 (P) Firestore接続初期化 (~200行)
  - React Nativeアプリ用のFirestore接続を初期化する
  - 接続設定の型定義を作成する
  - 接続テストを実装する
  - _Requirements: 12.3_

- [x] 14.2 (P) 日付ベースクエリ実装 (~200行)
  - 今日の日付でニュースを取得するクエリを実装する
  - 今日の日付で用語を取得するクエリを実装する
  - クエリ結果の型定義を作成する
  - _Requirements: 2.1, 5.1_

- [x] 14.3 (P) オフライン永続化設定 (~150行)
  - オフライン永続化を有効化する
  - キャッシュ動作を検証する
  - キャッシュサイズの設定を実装する
  - _Requirements: 2.5_

- [x] 14.4 (P) Firestoreエラーハンドリング (~200行)
  - 接続失敗時のエラーハンドリングを実装する
  - タイムアウト時のエラーハンドリングを実装する
  - エラーハンドラーへの通知機能を実装する
  - _Requirements: 7.5_

### 15. フロントエンド - タブナビゲーション

- [x] 15.1 (P) Expo Routerタブ設定 (~200行)
  - Expo Routerでファイルベースタブナビゲーションを設定する
  - 「ニュース」「用語」の2タブを実装する
  - タブルーティングの設定を実装する
  - _Requirements: 6.1_

- [x] 15.2 (P) タブアイコン・ラベル実装 (~150行)
  - タブアイコンをデザインする
  - タブラベルを実装する
  - iOS標準UIに準拠したスタイルを適用する
  - _Requirements: 6.1_

- [x] 15.3 (P) タブ切り替え最適化 (~150行)
  - タブ切り替え時に即座にコンテンツを表示する（遅延なし）
  - ダークモード・ライトモードの両方でタブバーの表示を検証する
  - _Requirements: 6.2, 6.5_

### 16. フロントエンド - テーマ・ダークモード

- [x] 16.1 (P) テーマプロバイダー基盤 (~200行)
  - React Contextでテーマプロバイダーを実装する
  - テーマの型定義を作成する
  - プロバイダーの初期化を実装する
  - _Requirements: 6.5_

- [x] 16.2 (P) システムテーマ自動検出 (~150行)
  - iOS端末のシステム設定からダークモード・ライトモードを自動検出する機能を実装する
  - テーマ変更の監視機能を実装する
  - _Requirements: 6.5_

- [x] 16.3 (P) 色定義・スタイル実装 (~200行)
  - 各モードに対応した色定義（背景色、テキスト色、カード色等）を実装する
  - 共通スタイルを定義する
  - テーマ切り替え時のアニメーションを実装する
  - _Requirements: 6.5_

### 17. フロントエンド - News Repository

- [ ] 17.1 ニュース取得機能 (~200行)
  - 今日の日付でFirestoreからニュースを取得する機能を実装する
  - Firestoreリスナーを使用せず、1回の読み取りでデータを取得する設計を実施する
  - _Requirements: 2.1, 2.4_

- [ ] 17.2 ニュースキャッシュマネージャー統合 (~200行)
  - キャッシュマネージャーを統合する
  - オフライン時にキャッシュデータを返す機能を実装する
  - キャッシュ有効性チェックを実装する
  - _Requirements: 2.5_

- [ ] 17.3 ニュース型定義・エラーハンドリング (~150行)
  - 取得したニュースデータを型安全に扱うためのTypeScript型定義を作成する
  - ニュース取得失敗時にエラーハンドラーを呼び出す機能を実装する
  - _Requirements: 2.1, 7.5_

### 18. フロントエンド - News ViewModel

- [ ] 18.1 News状態管理基盤 (~200行)
  - News Repositoryからニュースを取得し、Viewに状態を提供する機能を実装する
  - 世界ニュースと日本ニュースを分離して保持する
  - ViewModelの型定義を作成する
  - _Requirements: 2.1, 2.2_

- [ ] 18.2 Newsローディング・エラー状態管理 (~150行)
  - ローディング状態を管理する機能を実装する
  - エラー状態を管理する機能を実装する
  - 成功状態を管理する機能を実装する
  - _Requirements: 7.5_

- [ ] 18.3 Newsリトライ機能 (~150行)
  - ニュース取得のリトライ機能を提供する
  - ViewModelのテスタビリティを考慮し、Repository依存を注入可能にする
  - _Requirements: 7.5_

### 19. フロントエンド - News View

- [ ] 19.1 ニュース画面基本レイアウト (~250行)
  - ニュースタブ画面のUIコンポーネントを実装する
  - 世界ニュース・日本ニュースの2カテゴリをカード形式で表示する
  - 基本的なレイアウト構造を実装する
  - _Requirements: 2.1, 2.2_

- [ ] 19.2 ニュースカードコンポーネント (~200行)
  - 各カードにタイトルを表示する
  - 要約本文（約2000文字）を表示する
  - 更新日時を表示する
  - _Requirements: 2.3_

- [ ] 19.3 Newsローディング・エラー表示 (~200行)
  - ローディング中はスピナーを表示する
  - エラー時はエラーメッセージを表示する
  - リトライボタンを表示する
  - _Requirements: 7.5_

- [ ] 19.4 News iOSサイズ対応 (~150行)
  - iOS各サイズ（iPhone SE〜iPhone Pro Max）でレイアウトを検証する
  - レスポンシブデザインを実装する
  - _Requirements: 6.3_

### 20. フロントエンド - News UI最適化

- [ ] 20.1 Newsフォント・行間設定 (~150行)
  - 可読性を確保するため、適切なフォントサイズ（16pt以上）を設定する
  - 行間（1.5倍以上）を設定する
  - _Requirements: 6.4_

- [ ] 20.2 Newsスクロール・カード余白最適化 (~150行)
  - スクロール可能な長文表示を実装する
  - 2000文字の要約文を快適に読めるようにする
  - カード間の余白を適切に設定する
  - _Requirements: 6.4_

- [ ] 20.3 Newsダークモード・アクセシビリティ (~200行)
  - ダークモード・ライトモードの両方で可読性を検証する
  - アクセシビリティ（VoiceOver対応）を考慮する
  - コントラスト比を確認する
  - _Requirements: 6.5_

### 21. フロントエンド - Terms Repository

- [ ] 21.1 用語取得機能 (~200行)
  - 今日の日付でFirestoreから3つの用語を取得する機能を実装する
  - Firestoreリスナーを使用せず、1回の読み取りでデータを取得する設計を実施する
  - _Requirements: 5.1, 5.3_

- [ ] 21.2 用語キャッシュマネージャー統合 (~200行)
  - キャッシュマネージャーを統合する
  - オフライン時にキャッシュデータを返す機能を実装する
  - キャッシュ有効性チェックを実装する
  - _Requirements: 5.4_

- [ ] 21.3 用語型定義・エラーハンドリング (~150行)
  - 取得した用語データを型安全に扱うためのTypeScript型定義を作成する
  - 用語取得失敗時にエラーハンドラーを呼び出す機能を実装する
  - _Requirements: 5.1, 7.5_

### 22. フロントエンド - Terms ViewModel

- [ ] 22.1 Terms状態管理基盤 (~200行)
  - Terms Repositoryから用語を取得し、Viewに状態を提供する機能を実装する
  - 3つの用語を配列として保持する
  - ViewModelの型定義を作成する
  - _Requirements: 5.1, 5.3_

- [ ] 22.2 Termsローディング・エラー状態管理 (~150行)
  - ローディング状態を管理する機能を実装する
  - エラー状態を管理する機能を実装する
  - 成功状態を管理する機能を実装する
  - _Requirements: 7.5_

- [ ] 22.3 Termsリトライ機能 (~150行)
  - 用語取得のリトライ機能を提供する
  - ViewModelのテスタビリティを考慮し、Repository依存を注入可能にする
  - _Requirements: 7.5_

### 23. フロントエンド - Terms View

- [ ] 23.1 用語画面基本レイアウト (~250行)
  - 用語タブ画面のUIコンポーネントを実装する
  - 3つの用語カードをリスト形式で表示する
  - 基本的なレイアウト構造を実装する
  - _Requirements: 5.1_

- [ ] 23.2 用語カードコンポーネント (~200行)
  - 各カードに用語名を表示する
  - 解説文（約500文字）を表示する
  - 用語名を太字で強調表示する
  - _Requirements: 5.2_

- [ ] 23.3 Termsローディング・エラー表示 (~200行)
  - ローディング中はスピナーを表示する
  - エラー時はエラーメッセージを表示する
  - リトライボタンを表示する
  - _Requirements: 7.5_

- [ ] 23.4 Terms iOSサイズ対応 (~150行)
  - iOS各サイズ（iPhone SE〜iPhone Pro Max）でレイアウトを検証する
  - レスポンシブデザインを実装する
  - _Requirements: 6.3_

### 24. フロントエンド - Terms UI最適化

- [ ] 24.1 Termsフォント・行間設定 (~150行)
  - 可読性を確保するため、適切なフォントサイズ（16pt以上）を設定する
  - 行間（1.5倍以上）を設定する
  - _Requirements: 6.4_

- [ ] 24.2 Termsカード余白・用語名強調 (~150行)
  - 用語カード間の余白を適切に設定する
  - 用語名を太字で強調表示し、解説文と区別する
  - _Requirements: 6.4_

- [ ] 24.3 Termsダークモード・アクセシビリティ (~200行)
  - ダークモード・ライトモードの両方で可読性を検証する
  - アクセシビリティ（VoiceOver対応）を考慮する
  - コントラスト比を確認する
  - _Requirements: 6.5_

### 25. パフォーマンス最適化 - アプリ起動

- [ ] 25.1 Expo Router初期読み込み最適化 (~200行)
  - Expo Routerの初期読み込みを最適化する
  - 不要な画面の事前ロードを無効化する
  - 起動時のバンドルサイズを最適化する
  - _Requirements: 7.1_

- [ ] 25.2 Firestore初期化最適化 (~150行)
  - Firestore接続の初期化を非同期で実行する
  - UI描画をブロックしないようにする
  - 初期化完了の検知を実装する
  - _Requirements: 7.1_

- [ ] 25.3 起動時間検証 (~150行)
  - iOS実機でアプリ起動時間を計測する
  - 3秒以内であることを検証する
  - 起動時のメモリ使用量を監視する
  - _Requirements: 7.1, 7.4_

### 26. パフォーマンス最適化 - キャッシュ

- [ ] 26.1 AsyncStorage読み取り最適化 (~200行)
  - AsyncStorageの読み取りを非同期で実行する
  - UIスレッドをブロックしないようにする
  - 読み取り時間を計測する
  - _Requirements: 2.6, 7.2_

- [ ] 26.2 キャッシュシリアライズ最適化 (~150行)
  - キャッシュデータのシリアライズを最適化する
  - デシリアライズを最適化する
  - データサイズを最小化する
  - _Requirements: 7.2_

- [ ] 26.3 キャッシュ読み込み時間検証 (~150行)
  - iOS実機でキャッシュ読み込み時間を計測する
  - 1秒以内であることを検証する
  - キャッシュサイズを監視する
  - _Requirements: 2.6, 7.2_

### 27. パフォーマンス最適化 - バッチ処理

- [ ] 27.1 並列実行最適化 (~200行)
  - NewsAPIとGoogle News RSSの並列実行を検証する
  - 処理時間を短縮する最適化を実装する
  - _Requirements: 1.8_

- [ ] 27.2 Claude APIタイムアウト最適化 (~150行)
  - Claude APIのタイムアウト設定を最適化する
  - 長時間待機を防止する
  - タイムアウト値の調整を実施する
  - _Requirements: 1.8_

- [ ] 27.3 バッチ処理時間検証 (~150行)
  - バッチ処理時間をログに記録する
  - 5分以内であることを検証する
  - Vercel Serverless Functionsのメモリ設定を確認する
  - _Requirements: 1.8, 7.3_

### 28. データ管理 - クリーンアップ

- [ ] 28.1 クリーンアップAPIエンドポイント (~200行)
  - 毎日実行される`/api/batch/cleanup`エンドポイントを実装する
  - リクエスト認証を実装する
  - エンドポイントの基本レスポンス構造を定義する
  - _Requirements: 3.1_

- [ ] 28.2 30日超過データ削除ロジック (~200行)
  - Firestore `news`コレクションから30日を超えるニュースを自動削除する機能を実装する
  - 削除対象のドキュメントを日付でクエリする
  - バッチ削除を実行する
  - _Requirements: 3.2_

- [ ] 28.3 クリーンアップログ・エラーハンドリング (~150行)
  - 削除されたドキュメント数をログに記録する
  - 削除失敗時のエラーハンドリングを実装する
  - リトライロジックを実装する
  - _Requirements: 3.2_

### 29. データ管理 - コスト監視

- [ ] 29.1 Firestoreアクセスログ機能 (~200行)
  - Firestoreの読み取り回数をログに記録する機能を実装する
  - 書き込み回数をログに記録する機能を実装する
  - 無料枠内であることを確認する機能を実装する
  - _Requirements: 10.4_

- [ ] 29.2 APIリクエストカウント機能 (~200行)
  - NewsAPIのリクエスト回数をカウントする機能を実装する
  - 100リクエスト/日を超えないよう監視する
  - Claude APIのトークン使用量をログに記録する
  - _Requirements: 10.2, 10.3_

- [ ] 29.3 コスト警告機能 (~150行)
  - 月間コストが1,000円を超える可能性がある場合にログに警告を出力する機能を実装する
  - コスト超過時にHaikuモデル優先使用を維持する設計を確認する
  - _Requirements: 10.1, 10.6_

### 30. セキュリティ - 環境変数管理

- [ ] 30.1 環境変数管理実装 (~150行)
  - NewsAPIキー、Claude APIキー、Firebase秘密鍵を環境変数で管理する
  - `.env.example`ファイルを作成する
  - 必要な環境変数を文書化する
  - _Requirements: 9.1, 9.2_

- [ ] 30.2 APIキーハードコーディング検証 (~100行)
  - コードベース内にAPIキーをハードコーディングしていないことを検証する
  - Vercel環境変数にすべてのAPIキーを安全に登録する
  - _Requirements: 9.2_

- [ ] 30.3 環境変数読み込み検証 (~150行)
  - 環境変数が正しく読み込まれることをヘルスチェックエンドポイントで検証する
  - 環境変数未設定時のエラーハンドリングを実装する
  - _Requirements: 9.1_

### 31. セキュリティ - 通信

- [ ] 31.1 HTTPS通信確認 (~150行)
  - すべての外部API通信（NewsAPI、Google News RSS、Claude API）でHTTPSを使用することを確認する
  - 通信データを暗号化して送受信する（TLS 1.2以上）
  - _Requirements: 9.3, 9.4_

- [ ] 31.2 通信タイムアウト設定 (~150行)
  - API通信のタイムアウト設定を実装する
  - 長時間接続を防止する
  - _Requirements: 9.3_

- [ ] 31.3 プライバシー・利用規約確認 (~100行)
  - ユーザーの学習履歴を第三者と共有しないことを確認する
  - 外部サービスの利用規約を遵守していることを確認する
  - _Requirements: 9.5, 12.7_

### 32. テスト - バックエンドユニット（AI）

- [ ] 32.1 (P) AIサービス初期化テスト (~200行)
  - Claude APIクライアント初期化のテストを実装する
  - 環境変数読み込みのテストを実装する
  - _Requirements: 12.5_

- [ ] 32.2 (P) ニュース要約テスト (~250行)
  - ニュース要約機能のモックテストを実装する
  - プロンプト生成のテストを実装する
  - 文字数検証のテストを実装する
  - _Requirements: 1.4, 1.5_

- [ ] 32.3 (P) 用語生成テスト (~250行)
  - 用語生成機能のモックテストを実装する
  - 難易度指定のテストを実装する
  - 文字数検証のテストを実装する
  - _Requirements: 4.1, 4.2_

### 33. テスト - バックエンドユニット（ニュース取得）

- [ ] 33.1 (P) NewsAPIテスト (~200行)
  - NewsAPI取得機能のモックテストを実装する
  - レスポンスパースのテストを実装する
  - _Requirements: 1.2_

- [ ] 33.2 (P) Google News RSSテスト (~200行)
  - RSS取得機能のモックテストを実装する
  - RSSパースのテストを実装する
  - _Requirements: 1.3_

- [ ] 33.3 (P) エラーハンドリングテスト (~200行)
  - エラーハンドリングのテストを実装する
  - リトライロジックのテストを実装する
  - _Requirements: 1.7_

### 34. テスト - フロントエンドユニット

- [ ] 34.1 (P) News ViewModelテスト (~250行)
  - News ViewModelの単体テストを実装する
  - 状態管理のテストを実装する
  - _Requirements: 2.1_

- [ ] 34.2 (P) Terms ViewModelテスト (~250行)
  - Terms ViewModelの単体テストを実装する
  - 状態管理のテストを実装する
  - _Requirements: 5.1_

- [ ] 34.3 (P) Repositoryテスト (~200行)
  - News Repositoryのモックテストを実装する
  - Terms Repositoryのモックテストを実装する
  - _Requirements: 2.1, 5.1_

- [ ] 34.4 (P) キャッシュマネージャーテスト (~200行)
  - キャッシュマネージャーの読み書きテストを実装する
  - キャッシュ有効性チェックのテストを実装する
  - _Requirements: 2.5, 7.5_

### 35. テスト - バックエンド統合

- [ ] 35.1 ニュースバッチ統合テスト (~250行)
  - ニュースバッチ処理のエンドツーエンドテストを実装する
  - Firestore保存の統合テストを実装する
  - _Requirements: 1.6_

- [ ] 35.2 用語バッチ統合テスト (~250行)
  - 用語バッチ処理のエンドツーエンドテストを実装する
  - 重複チェックの統合テストを実装する
  - _Requirements: 4.5_

- [ ] 35.3 バッチ処理時間検証テスト (~150行)
  - バッチ処理の5分以内完了を検証するテストを実装する
  - タイムアウト検証を実装する
  - _Requirements: 1.8_

### 36. テスト - フロントエンド統合

- [ ] 36.1 ニュース表示フローテスト (~250行)
  - ニュース表示フローのエンドツーエンドテストを実装する
  - データ取得から表示までのフローをテストする
  - _Requirements: 2.1_

- [ ] 36.2 用語表示フローテスト (~250行)
  - 用語表示フローのエンドツーエンドテストを実装する
  - データ取得から表示までのフローをテストする
  - _Requirements: 5.1_

- [ ] 36.3 オフラインテスト (~200行)
  - オフライン時のキャッシュ読み込みテストを実装する
  - オフライン→オンライン切り替えテストを実装する
  - _Requirements: 2.5_

- [ ] 36.4 タブ切り替え・パフォーマンステスト (~200行)
  - タブ切り替えテストを実装する
  - パフォーマンステスト（起動3秒以内、キャッシュ1秒以内）を実装する
  - _Requirements: 6.2, 7.1, 7.2_

### 37. テスト - E2E

- [ ] 37.1 フルフローE2Eテスト (~300行)
  - iOS実機またはシミュレータでアプリ全体のE2Eテストを実装する
  - ニュース・用語の取得から表示までのフルフローをテストする
  - _Requirements: 2.1, 5.1_

- [ ] 37.2 オフライン・オンライン切替E2Eテスト (~250行)
  - オフライン→オンライン切り替え時のデータ同期をテストする
  - キャッシュ動作を検証する
  - _Requirements: 2.5, 5.4_

- [ ] 37.3 エラーリトライE2Eテスト (~200行)
  - エラー発生時のリトライボタン動作をテストする
  - エラーメッセージ表示を検証する
  - _Requirements: 7.5_

- [ ] 37.4 テーマ切替E2Eテスト (~150行)
  - ダークモード・ライトモード切り替えをテストする
  - 各モードでの表示を検証する
  - _Requirements: 6.5_

### 38. 安定性検証 - バッチ処理

- [ ] 38.1 バッチ連続実行検証 (~150行)
  - ニュース・用語バッチを連続7日間実行する
  - 98%以上の成功率を達成することを検証する
  - _Requirements: 8.2_

- [ ] 38.2 バッチリトライ動作検証 (~150行)
  - バッチ失敗時のリトライ動作（最大3回）を検証する
  - リトライ間隔を検証する
  - _Requirements: 8.3_

- [ ] 38.3 外部API障害テスト (~200行)
  - 外部API障害（NewsAPI、Claude API）時のエラーハンドリングを検証する
  - エラーログがFirestoreに正しく記録されることを検証する
  - _Requirements: 8.5_

### 39. 安定性検証 - アプリ

- [ ] 39.1 アプリクラッシュ検証 (~150行)
  - iOS実機でアプリを連続使用する
  - クラッシュ率1%以下を達成することを検証する
  - _Requirements: 8.4_

- [ ] 39.2 メモリリーク検証 (~150行)
  - メモリリークが発生しないことをXcode Instrumentsで検証する
  - メモリ使用量を監視する
  - _Requirements: 8.1_

- [ ] 39.3 ネットワーク障害検証 (~200行)
  - ネットワーク障害時のエラーメッセージとリトライ機能を検証する
  - オフライン状態での動作安定性を検証する
  - _Requirements: 7.5_

- [ ] 39.4 iOSバージョン互換性検証 (~150行)
  - iOS 14、15、16、17の各バージョンで動作検証を実施する
  - 互換性問題を検出・修正する
  - _Requirements: 7.4_

### 40. システム統合検証

- [ ] 40.1 バックエンド・フロントエンド統合検証 (~150行)
  - バッチ処理でFirestoreに保存されたデータが、モバイルアプリで正しく表示されることを検証する
  - 毎日8:00にバッチ処理が実行され、同日中にアプリで新しいニュース・用語が閲覧可能であることを検証する
  - _Requirements: 1.6, 2.1, 5.1_

- [ ] 40.2 データ同期・クリーンアップ検証 (~150行)
  - データクリーンアップバッチで30日超過データが削除され、アプリ側でエラーが発生しないことを検証する
  - オフライン→オンライン切り替え時にデータが自動同期されることを検証する
  - _Requirements: 3.2, 8.5_

- [ ] 40.3 運用コスト検証 (~150行)
  - 1日あたりのFirestore読み取り・書き込み回数を計測し、無料枠内であることを検証する
  - NewsAPIリクエスト回数が100リクエスト/日以内であることを検証する
  - Claude APIトークン使用量を計測し、月間コストを算出する
  - 月間運用コストが1,000円以下であることを確認する
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ] 40.4 保守性・拡張性検証 (~150行)
  - コードベースがESLintルールに準拠していることを検証する
  - すべてのコンポーネントに適切なコメントとドキュメンテーションが含まれていることを確認する
  - アーキテクチャがMVVM + Feature-based + Repositoryパターンに従っていることを確認する
  - Gitコミット履歴が適切に管理されていることを確認する
  - _Requirements: 11.1, 11.2, 11.4, 11.5_

## タスク間の依存関係

### 並列実行可能なタスク（Pマーク付き）

- **1.1, 1.2, 1.3**: プロジェクト初期セットアップは独立して実行可能
- **2.1, 2.2, 2.3**: 共通インフラストラクチャは並列実装可能
- **14.1〜14.4, 15.1〜15.3, 16.1〜16.3**: フロントエンド共通レイヤーは並列実装可能
- **32.1〜32.3, 33.1〜33.3, 34.1〜34.4**: ユニットテストは並列実装可能

### 順次実行が必要なタスク

- **3.1 → 3.2〜3.5**: Claude API基盤が必要
- **3.1〜3.5 → 4.1〜4.5, 5.1〜5.5**: AI基盤完了後に要約・用語生成
- **6.1〜6.5, 7.1〜7.4 → 8.1〜8.6**: ニュース取得機能が必要
- **5.1〜5.5 → 11.1〜11.6**: 用語生成機能が必要（Task 10はスキップ）
- **17.1 → 17.2 → 17.3**: Repository → キャッシュ統合 → 型定義の順序
- **18.1 → 18.2 → 18.3**: ViewModel基盤 → 状態管理 → リトライの順序
- **19.1 → 19.2 → 19.3 → 19.4**: View基本 → カード → エラー表示 → サイズ対応の順序
- **32〜34 → 35〜36 → 37**: 単体テスト → 統合テスト → E2Eテストの順序
- **3〜37 → 38〜40**: すべての実装・テスト完了後に検証を実施

## 要件カバレッジマトリクス

| Requirement | 対応タスク                                                             |
| ----------- | ---------------------------------------------------------------------- |
| 1.1         | 8.1, 11.1, 13.1                                                        |
| 1.2         | 6.1, 6.2, 6.3, 33.1                                                    |
| 1.3         | 7.1, 7.2, 7.3, 33.2                                                    |
| 1.4         | 4.1, 4.2, 4.3, 4.4, 8.3, 32.2                                          |
| 1.5         | 4.1, 8.3, 32.2                                                         |
| 1.6         | 8.4, 11.4, 35.1, 40.1                                                  |
| 1.7         | 4.5, 5.5, 9.1, 12.1, 33.3                                              |
| 1.8         | 8.6, 27.1, 27.2, 27.3, 35.3                                            |
| 2.1         | 14.2, 17.1, 18.1, 19.1, 34.1, 36.1, 37.1, 40.1                         |
| 2.2         | 18.1, 19.1                                                             |
| 2.3         | 19.2                                                                   |
| 2.4         | 17.1                                                                   |
| 2.5         | 14.3, 17.2, 36.3, 37.2                                                 |
| 2.6         | 26.1, 26.3                                                             |
| 3.1         | 28.1                                                                   |
| 3.2         | 28.2, 28.3, 40.2                                                       |
| 3.3         | 2.1                                                                    |
| 3.4         | 13.1                                                                   |
| 4.1         | 5.1, 11.2, 32.3                                                        |
| 4.2         | 5.1, 32.3                                                              |
| 4.3         | 10.1, 10.2, 10.3, 11.3                                                 |
| 4.4         | 5.2, 11.2                                                              |
| 4.5         | 11.4, 35.2                                                             |
| 4.6         | 11.5                                                                   |
| 5.1         | 14.2, 21.1, 22.1, 23.1, 34.2, 36.2, 37.1, 40.1                         |
| 5.2         | 23.2                                                                   |
| 5.3         | 21.1, 22.1                                                             |
| 5.4         | 21.2, 37.2                                                             |
| 5.5         | 10.2                                                                   |
| 6.1         | 15.1, 15.2                                                             |
| 6.2         | 15.3, 36.4                                                             |
| 6.3         | 19.4, 23.4                                                             |
| 6.4         | 20.1, 20.2, 24.1, 24.2                                                 |
| 6.5         | 15.3, 16.1, 16.2, 16.3, 20.3, 24.3, 37.4                               |
| 7.1         | 25.1, 25.2, 25.3, 36.4                                                 |
| 7.2         | 26.1, 26.2, 26.3, 36.4                                                 |
| 7.3         | 27.3                                                                   |
| 7.4         | 25.3, 39.4                                                             |
| 7.5         | 14.4, 17.3, 18.2, 18.3, 19.3, 21.3, 22.2, 22.3, 23.3, 34.4, 37.3, 39.3 |
| 8.1         | 39.2                                                                   |
| 8.2         | 9.3, 12.3, 38.1                                                        |
| 8.3         | 9.1, 12.1, 38.2                                                        |
| 8.4         | 39.1                                                                   |
| 8.5         | 3.5, 6.5, 7.4, 9.2, 9.4, 10.4, 12.2, 12.4, 38.3, 40.2                  |
| 9.1         | 3.2, 6.1, 13.2, 30.1, 30.3                                             |
| 9.2         | 30.1, 30.2                                                             |
| 9.3         | 3.2, 31.1, 31.2                                                        |
| 9.4         | 3.2, 31.1                                                              |
| 9.5         | 31.3                                                                   |
| 10.1        | 29.3, 40.3                                                             |
| 10.2        | 6.4, 29.2, 40.3                                                        |
| 10.3        | 3.3, 29.2, 40.3                                                        |
| 10.4        | 29.1, 40.3                                                             |
| 10.5        | 40.3                                                                   |
| 10.6        | 29.3                                                                   |
| 11.1        | 40.4                                                                   |
| 11.2        | 40.4                                                                   |
| 11.3        | 3.5, 9.2, 12.2                                                         |
| 11.4        | 40.4                                                                   |
| 11.5        | 40.4                                                                   |
| 12.1        | 1.1                                                                    |
| 12.2        | 1.3                                                                    |
| 12.3        | 1.2, 14.1                                                              |
| 12.4        | 13.1                                                                   |
| 12.5        | 3.1, 3.4, 32.1                                                         |
| 12.6        | (iOS優先開発はプロジェクト全体で実施)                                  |
| 12.7        | 31.3                                                                   |

**カバレッジ確認**: 全12要件（Requirement 1〜12）の全受入基準が上記タスクに対応しています。

## タスク数・想定行数サマリ

| カテゴリ                             | タスク数 |  想定合計行数 |
| ------------------------------------ | -------: | ------------: |
| 1. プロジェクト初期セットアップ      |        3 |        (完了) |
| 2. 共通インフラストラクチャ          |        3 |        (完了) |
| 3. Claude API基盤                    |        5 |        ~950行 |
| 4. ニュース要約機能                  |        5 |        ~850行 |
| 5. 用語生成機能                      |        5 |        ~800行 |
| 6. NewsAPI統合                       |        5 |        ~850行 |
| 7. Google News RSS統合               |        4 |        ~650行 |
| 8. ニュースバッチ処理                |        6 |      ~1,050行 |
| 9. ニュースバッチエラー処理          |        4 |        ~750行 |
| 10. 用語重複チェック                 |        4 |    (スキップ) |
| 11. 用語バッチ処理                   |        6 |      ~1,050行 |
| 12. 用語バッチエラー処理             |        4 |        ~750行 |
| 13. Vercel Cron Jobs                 |        3 |        ~500行 |
| 14. Firestoreクライアント            |        4 |        ~750行 |
| 15. タブナビゲーション               |        3 |        ~500行 |
| 16. テーマ・ダークモード             |        3 |        ~550行 |
| 17. News Repository                  |        3 |        ~550行 |
| 18. News ViewModel                   |        3 |        ~500行 |
| 19. News View                        |        4 |        ~800行 |
| 20. News UI最適化                    |        3 |        ~500行 |
| 21. Terms Repository                 |        3 |        ~550行 |
| 22. Terms ViewModel                  |        3 |        ~500行 |
| 23. Terms View                       |        4 |        ~800行 |
| 24. Terms UI最適化                   |        3 |        ~500行 |
| 25. パフォーマンス（起動）           |        3 |        ~500行 |
| 26. パフォーマンス（キャッシュ）     |        3 |        ~500行 |
| 27. パフォーマンス（バッチ）         |        3 |        ~500行 |
| 28. データ管理（クリーンアップ）     |        3 |        ~550行 |
| 29. データ管理（コスト監視）         |        3 |        ~550行 |
| 30. セキュリティ（環境変数）         |        3 |        ~400行 |
| 31. セキュリティ（通信）             |        3 |        ~400行 |
| 32. テスト（AIユニット）             |        3 |        ~700行 |
| 33. テスト（ニュース取得ユニット）   |        3 |        ~600行 |
| 34. テスト（フロントエンドユニット） |        4 |        ~900行 |
| 35. テスト（バックエンド統合）       |        3 |        ~650行 |
| 36. テスト（フロントエンド統合）     |        4 |        ~900行 |
| 37. テスト（E2E）                    |        4 |        ~900行 |
| 38. 安定性検証（バッチ）             |        3 |        ~500行 |
| 39. 安定性検証（アプリ）             |        4 |        ~650行 |
| 40. システム統合検証                 |        4 |        ~600行 |
| **合計**                             |  **134** | **~24,200行** |

## 実装順序の推奨

1. **Phase 1: 基盤構築（完了）**
   - タスク 1.1〜1.3（プロジェクト初期セットアップ）
   - タスク 2.1〜2.3（共通インフラストラクチャ）

2. **Phase 2: AI基盤（タスク3〜5）**
   - タスク 3.1〜3.5（Claude API基盤）
   - タスク 4.1〜4.5（ニュース要約機能）
   - タスク 5.1〜5.5（用語生成機能）

3. **Phase 3: ニュース取得（タスク6〜9）**
   - タスク 6.1〜6.5（NewsAPI統合）
   - タスク 7.1〜7.4（Google News RSS統合）
   - タスク 8.1〜8.6（ニュースバッチ処理）
   - タスク 9.1〜9.4（ニュースバッチエラー処理）

4. **Phase 4: 用語バッチ（タスク11〜13）**
   - ~~タスク 10.1〜10.4（用語重複チェック）~~ スキップ
   - タスク 11.1〜11.6（用語バッチ処理）※11.3はスキップ
   - タスク 12.1〜12.4（用語バッチエラー処理）
   - タスク 13.1〜13.3（Vercel Cron Jobs）

5. **Phase 5: フロントエンド共通（タスク14〜16）**
   - タスク 14.1〜14.4（Firestoreクライアント）
   - タスク 15.1〜15.3（タブナビゲーション）
   - タスク 16.1〜16.3（テーマ・ダークモード）

6. **Phase 6: News Feature（タスク17〜20）**
   - タスク 17.1〜17.3（News Repository）
   - タスク 18.1〜18.3（News ViewModel）
   - タスク 19.1〜19.4（News View）
   - タスク 20.1〜20.3（News UI最適化）

7. **Phase 7: Terms Feature（タスク21〜24）**
   - タスク 21.1〜21.3（Terms Repository）
   - タスク 22.1〜22.3（Terms ViewModel）
   - タスク 23.1〜23.4（Terms View）
   - タスク 24.1〜24.3（Terms UI最適化）

8. **Phase 8: 最適化・セキュリティ（タスク25〜31）**
   - タスク 25.1〜25.3（パフォーマンス - 起動）
   - タスク 26.1〜26.3（パフォーマンス - キャッシュ）
   - タスク 27.1〜27.3（パフォーマンス - バッチ）
   - タスク 28.1〜28.3（データ管理 - クリーンアップ）
   - タスク 29.1〜29.3（データ管理 - コスト監視）
   - タスク 30.1〜30.3（セキュリティ - 環境変数）
   - タスク 31.1〜31.3（セキュリティ - 通信）

9. **Phase 9: テスト（タスク32〜37）**
   - タスク 32.1〜32.3（AIユニットテスト）
   - タスク 33.1〜33.3（ニュース取得ユニットテスト）
   - タスク 34.1〜34.4（フロントエンドユニットテスト）
   - タスク 35.1〜35.3（バックエンド統合テスト）
   - タスク 36.1〜36.4（フロントエンド統合テスト）
   - タスク 37.1〜37.4（E2Eテスト）

10. **Phase 10: 検証（タスク38〜40）**
    - タスク 38.1〜38.3（安定性検証 - バッチ）
    - タスク 39.1〜39.4（安定性検証 - アプリ）
    - タスク 40.1〜40.4（システム統合検証）
