# 実装タスク

## タスク概要

本タスクは、投資学習支援モバイルアプリケーション「investment-news-app」の実装を、requirements.mdの12要件とdesign.mdのアーキテクチャ設計に基づいて段階的に進めるものです。MVVM + Feature-based + Repositoryパターンを採用し、React Native（Expo）フロントエンド、Vercel Serverless Functionsバックエンド、Firebase Firestoreデータベースを統合します。

**実装範囲**:
- フロントエンド: ニュース・用語表示機能（MVVM構造）
- バックエンド: 日次バッチ処理（ニュース取得・要約、用語生成）
- データ層: Firestoreスキーマ、キャッシュ管理、エラーハンドリング
- テスト: 単体テスト、統合テスト、E2Eテスト

**実装しない範囲**:
- ユーザー認証・ログイン機能（v1.0では対象外）
- デプロイメント自動化（手動デプロイ）
- ドキュメント作成（コード内コメントのみ）

## タスク一覧

### 1. プロジェクト初期セットアップ

- [ ] 1.1 (P) モノレポ構成とExpoプロジェクト初期化
  - ルートディレクトリに`mobile/`（React Native Expo）と`backend/`（Vercel Functions）のモノレポ構造を構築する
  - Expo SDK 53以降でReact Nativeプロジェクトを初期化し、New Architecture対応を有効化する
  - TypeScript構成ファイルを設定し、厳密な型チェックを有効化する
  - ESLintとPrettierを設定し、コード品質基準を確立する
  - `.gitignore`に環境変数ファイルとビルド成果物を追加する
  - _Requirements: 11.1, 11.4, 12.1_

- [ ] 1.2 (P) Firebase Firestore接続設定
  - Firebase Consoleでプロジェクトを作成し、Firestoreデータベースを有効化する
  - モバイルアプリ向けに`@react-native-firebase/app`と`@react-native-firebase/firestore`をインストールする
  - iOS向けに`GoogleService-Info.plist`を配置し、Firestore初期化コードを実装する
  - オフライン永続化を有効化し、キャッシュサイズを設定する
  - Firestore接続テストを実施し、読み書き動作を確認する
  - _Requirements: 12.3, 2.5_

- [ ] 1.3 (P) Vercelプロジェクト初期化とFirebase Admin SDK設定
  - Vercel CLIをインストールし、プロジェクトをVercelアカウントにリンクする
  - `backend/`ディレクトリに`vercel.json`を作成し、Serverless Functions設定を定義する
  - Firebase Admin SDKをインストールし、サービスアカウント認証を設定する
  - 環境変数（Firebase秘密鍵、NewsAPIキー、Claude APIキー等）をVercel環境変数として登録する
  - ヘルスチェック用のAPIエンドポイントを実装し、Firestore接続を検証する
  - _Requirements: 12.2, 12.3, 9.1, 9.2_

### 2. 共通インフラストラクチャ実装

- [ ] 2.1 (P) Firestoreデータモデル定義とスキーマ実装
  - `news`コレクション（日付をドキュメントID、世界・日本ニュースをフィールド）のスキーマを定義する
  - `terms`コレクション（日付をドキュメントID、3つの用語を配列フィールド）のスキーマを定義する
  - `terms_history`コレクション（全配信済み用語の履歴を保持）のスキーマを定義する
  - 各ドキュメントが1MB以下になるよう文字数制限を設計する
  - Firestoreインデックス設定を作成し、日付クエリのパフォーマンスを最適化する
  - _Requirements: 3.3, 1.6, 4.5, 4.6_

- [ ] 2.2 (P) エラーハンドリング共通機能実装
  - ネットワークエラー、API障害、Firestore接続エラーを分類する例外型を定義する
  - エラーログをFirestore `error_logs`コレクションに記録する機能を実装する
  - リトライロジック（指数バックオフ、最大3回）を実装する
  - エラーメッセージのユーザー向け表示文言を定義する（日本語）
  - エラー発生時にスタックトレースと関連情報を詳細ログに記録する
  - _Requirements: 1.7, 7.5, 8.3, 8.5, 11.3_

- [ ] 2.3 (P) キャッシュ管理システム実装
  - モバイルアプリ用のローカルストレージキャッシュ（AsyncStorage）を実装する
  - キャッシュキー生成ロジック（日付ベース）を実装する
  - キャッシュ有効期限（当日のみ有効）を管理する機能を実装する
  - オフライン時にキャッシュデータを1秒以内に取得する機能を実装する
  - キャッシュクリア機能（翌日になったら前日キャッシュを削除）を実装する
  - _Requirements: 2.5, 2.6, 5.4, 7.2_

### 3. バックエンド - AI処理サービス実装

- [ ] 3.1 Claude API統合とAIサービス基盤実装
  - Claude API（Anthropic）のクライアントライブラリをインストールする
  - APIキーを環境変数から読み込み、HTTPS通信で安全に接続する
  - Haikuモデルを優先使用し、トークン使用量を監視する機能を実装する
  - API呼び出しのレート制限ハンドリングとリトライロジックを実装する
  - AIサービスのエラーハンドリング（タイムアウト、API障害等）を実装する
  - _Requirements: 12.5, 9.1, 9.3, 9.4, 10.3_

- [ ] 3.2 ニュース要約・翻訳機能実装
  - 複数の英語ニュース記事を統合し、日本語で約2000文字に要約するプロンプトを実装する
  - 日本語ニュース記事を約2000文字に要約するプロンプトを実装する
  - Claude APIレスポンスをパースし、要約文を抽出する
  - 要約文の文字数検証（1800〜2200文字の範囲内）を実施する
  - 要約失敗時のフォールバック処理（リトライ、エラー記録）を実装する
  - _Requirements: 1.4, 1.5_

- [ ] 3.3 投資用語生成機能実装
  - 投資・金融用語を1つ生成し、約500文字の解説を生成するプロンプトを実装する
  - 初級・中級・上級の難易度を指定可能なプロンプトパラメータを実装する
  - Claude APIレスポンスから用語名と解説文を抽出する
  - 解説文の文字数検証（400〜600文字の範囲内）を実施する
  - 用語生成失敗時のフォールバック処理を実装する
  - _Requirements: 4.1, 4.2, 4.4_

### 4. バックエンド - ニュース自動取得・処理バッチ実装

- [ ] 4.1 NewsAPI統合とニュース取得機能実装
  - NewsAPI v2クライアントライブラリをインストールする
  - `business`カテゴリで世界のニュース記事を取得するAPIリクエストを実装する
  - 無料枠（100リクエスト/日）を超えないよう、1日1回のみ実行する制御を実装する
  - APIレスポンスから記事タイトル、説明、本文を抽出する
  - NewsAPI障害時のエラーハンドリングとログ記録を実装する
  - _Requirements: 1.2, 10.2_

- [ ] 4.2 Google News RSS統合と日本ニュース取得機能実装
  - RSSパーサーライブラリをインストールする
  - Google News RSSから日本の経済・金融ニュースを取得する
  - RSSフィードをパースし、記事タイトル、説明、リンクを抽出する
  - RSS取得失敗時のエラーハンドリングとログ記録を実装する
  - RSS取得タイムアウト設定（30秒）を実装する
  - _Requirements: 1.3_

- [ ] 4.3 ニュースバッチ処理ロジック実装
  - 毎日8:00 JSTに実行される`/api/batch/news`エンドポイントを実装する
  - NewsAPIとGoogle News RSSを並列実行し、両方の記事を取得する
  - 世界ニュースをAIサービスで翻訳+要約し、日本ニュースを要約する
  - 要約結果をFirestore `news`コレクションに今日の日付で保存する
  - バッチ処理が5分以内に完了するよう、タイムアウト制御を実装する
  - _Requirements: 1.1, 1.4, 1.5, 1.6, 1.8_

- [ ] 4.4 ニュースバッチエラーハンドリングとリトライ実装
  - バッチ処理失敗時に最大3回リトライする機能を実装する
  - 各ステップ（ニュース取得、AI処理、Firestore保存）でエラーログを記録する
  - 部分的な成功（世界ニュースのみ成功等）を検出し、適切にハンドリングする
  - リトライ間隔を指数バックオフで設定する
  - 最終的な失敗時にFirestore `error_logs`に詳細ログを保存する
  - _Requirements: 1.7, 8.2, 8.3, 8.5_

### 5. バックエンド - 投資用語自動生成バッチ実装

- [ ] 5.1 用語重複チェック機能実装
  - Firestore `terms_history`コレクションから過去30日分の配信済み用語を取得する
  - 新規生成された用語が配信済み用語リストに含まれるかチェックする
  - 重複検出時にAIサービスへ再生成リクエストを送信する
  - 再生成試行回数の上限（最大5回）を設定する
  - 重複チェック失敗時のエラーハンドリングを実装する
  - _Requirements: 4.3, 5.5_

- [ ] 5.2 用語生成バッチ処理ロジック実装
  - 毎日8:00 JSTに実行される`/api/batch/terms`エンドポイントを実装する
  - AIサービスで初級・中級・上級の難易度を混在させた3つの用語を生成する
  - 各用語について重複チェックを実施し、重複時は再生成する
  - 生成された3つの用語をFirestore `terms`コレクションに今日の日付で保存する
  - 配信済み用語を`terms_history`コレクションに追加し、全履歴を保持する
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [ ] 5.3 用語バッチエラーハンドリングとリトライ実装
  - バッチ処理失敗時に最大3回リトライする機能を実装する
  - 用語生成、重複チェック、Firestore保存の各ステップでエラーログを記録する
  - 部分的な成功（2つの用語のみ生成成功等）を検出し、適切にハンドリングする
  - リトライ間隔を指数バックオフで設定する
  - 最終的な失敗時にFirestore `error_logs`に詳細ログを保存する
  - _Requirements: 1.7, 8.2, 8.3, 8.5_

### 6. バックエンド - Vercel Cron Jobs設定

- [ ] 6.1 Vercel Cron Jobs設定とセキュリティ実装
  - `vercel.json`にCron設定を追加し、毎日8:00 JSTにニュース・用語バッチを実行する
  - CRON_SECRET環境変数を生成し、不正アクセスを防止する認証機構を実装する
  - Cron Jobsの実行ログをVercel Logsで確認可能にする
  - Cron Jobsのタイムアウト設定（最大5分）を設定する
  - Cron Jobs失敗時のアラート通知設定を検討する（手動確認）
  - _Requirements: 12.4, 1.1, 3.4, 9.1_

### 7. フロントエンド - 共通レイヤー実装

- [ ] 7.1 (P) Firestore Clientとデータアクセス基盤実装
  - React Nativeアプリ用のFirestore接続を初期化する
  - 日付ベースのクエリ（今日の日付でニュース・用語を取得）を実装する
  - オフライン永続化を有効化し、キャッシュ動作を検証する
  - Firestoreエラー（接続失敗、タイムアウト等）をキャッチし、エラーハンドラーに通知する
  - Firestore読み取り回数を最小化し、無料枠内で運用する設計を実施する
  - _Requirements: 12.3, 2.5, 10.4_

- [ ] 7.2 (P) タブナビゲーション実装
  - Expo Routerでファイルベースタブナビゲーションを設定する
  - 「ニュース」「用語」の2タブを実装する
  - タブ切り替え時に即座にコンテンツを表示する（遅延なし）
  - タブアイコンとラベルをデザインし、iOS標準UIに準拠する
  - ダークモード・ライトモードの両方でタブバーの表示を検証する
  - _Requirements: 6.1, 6.2, 6.5_

- [ ] 7.3 (P) テーマプロバイダーとダークモード対応実装
  - React Contextでテーマプロバイダーを実装する
  - iOS端末のシステム設定からダークモード・ライトモードを自動検出する
  - 各モードに対応した色定義（背景色、テキスト色、カード色等）を実装する
  - 全画面でテーマが一貫して適用されることを検証する
  - テーマ切り替え時のアニメーションをスムーズにする
  - _Requirements: 6.5_

### 8. フロントエンド - News Feature実装

- [ ] 8.1 News Repository実装
  - 今日の日付でFirestoreからニュースを取得する機能を実装する
  - キャッシュマネージャーを統合し、オフライン時にキャッシュデータを返す
  - ニュース取得失敗時にエラーハンドラーを呼び出す
  - 取得したニュースデータを型安全に扱うためのTypeScript型定義を作成する
  - Firestoreリスナーを使用せず、1回の読み取りでデータを取得する設計を実施する
  - _Requirements: 2.1, 2.4, 2.5_

- [ ] 8.2 News ViewModel実装
  - News Repositoryからニュースを取得し、Viewに状態を提供する
  - ローディング状態、エラー状態、成功状態を管理する
  - ニュース取得のリトライ機能を提供する
  - 世界ニュースと日本ニュースを分離して保持する
  - ViewModelのテスタビリティを考慮し、Repository依存を注入可能にする
  - _Requirements: 2.1, 2.2, 7.5_

- [ ] 8.3 News View実装
  - ニュースタブ画面のUIコンポーネントを実装する
  - 世界ニュース・日本ニュースの2カテゴリをカード形式で表示する
  - 各カードにタイトル、要約本文（約2000文字）、更新日時を表示する
  - ローディング中はスピナーを表示し、エラー時はエラーメッセージとリトライボタンを表示する
  - iOS各サイズ（iPhone SE〜iPhone Pro Max）でレイアウトを検証する
  - _Requirements: 2.1, 2.2, 2.3, 6.3, 7.5_

- [ ] 8.4 News View UI/UX最適化
  - 可読性を確保するため、適切なフォントサイズ（16pt以上）と行間（1.5倍以上）を設定する
  - スクロール可能な長文表示を実装し、2000文字の要約文を快適に読めるようにする
  - カード間の余白を適切に設定し、視認性を向上させる
  - ダークモード・ライトモードの両方で可読性を検証する
  - アクセシビリティ（VoiceOver対応、コントラスト比等）を考慮する
  - _Requirements: 6.4, 6.5_

### 9. フロントエンド - Terms Feature実装

- [ ] 9.1 Terms Repository実装
  - 今日の日付でFirestoreから3つの用語を取得する機能を実装する
  - キャッシュマネージャーを統合し、オフライン時にキャッシュデータを返す
  - 用語取得失敗時にエラーハンドラーを呼び出す
  - 取得した用語データを型安全に扱うためのTypeScript型定義を作成する
  - Firestoreリスナーを使用せず、1回の読み取りでデータを取得する設計を実施する
  - _Requirements: 5.1, 5.3, 5.4_

- [ ] 9.2 Terms ViewModel実装
  - Terms Repositoryから用語を取得し、Viewに状態を提供する
  - ローディング状態、エラー状態、成功状態を管理する
  - 用語取得のリトライ機能を提供する
  - 3つの用語を配列として保持する
  - ViewModelのテスタビリティを考慮し、Repository依存を注入可能にする
  - _Requirements: 5.1, 5.3, 7.5_

- [ ] 9.3 Terms View実装
  - 用語タブ画面のUIコンポーネントを実装する
  - 3つの用語カードをリスト形式で表示する
  - 各カードに用語名と解説文（約500文字）を表示する
  - ローディング中はスピナーを表示し、エラー時はエラーメッセージとリトライボタンを表示する
  - iOS各サイズ（iPhone SE〜iPhone Pro Max）でレイアウトを検証する
  - _Requirements: 5.1, 5.2, 6.3, 7.5_

- [ ] 9.4 Terms View UI/UX最適化
  - 可読性を確保するため、適切なフォントサイズ（16pt以上）と行間（1.5倍以上）を設定する
  - 用語カード間の余白を適切に設定し、視認性を向上させる
  - 用語名を太字で強調表示し、解説文と区別する
  - ダークモード・ライトモードの両方で可読性を検証する
  - アクセシビリティ（VoiceOver対応、コントラスト比等）を考慮する
  - _Requirements: 6.4, 6.5_

### 10. パフォーマンス最適化

- [ ] 10.1 アプリ起動パフォーマンス最適化
  - アプリ起動時の初期画面表示を3秒以内に完了させる
  - Expo Routerの初期読み込みを最適化し、不要な画面の事前ロードを無効化する
  - Firestore接続の初期化を非同期で実行し、UI描画をブロックしないようにする
  - iOS実機でアプリ起動時間を計測し、3秒以内であることを検証する
  - 起動時のメモリ使用量を監視し、iOS 14以降のデバイスで問題なく動作することを確認する
  - _Requirements: 7.1, 7.4_

- [ ] 10.2 キャッシュ読み込みパフォーマンス最適化
  - キャッシュ済みニュース・用語を1秒以内に表示する
  - AsyncStorageの読み取りを非同期で実行し、UIスレッドをブロックしないようにする
  - キャッシュデータのシリアライズ・デシリアライズを最適化する
  - iOS実機でキャッシュ読み込み時間を計測し、1秒以内であることを検証する
  - キャッシュサイズを監視し、ストレージ容量を最小化する
  - _Requirements: 2.6, 7.2_

- [ ] 10.3 バッチ処理パフォーマンス最適化
  - ニュース・用語バッチ処理を5分以内に完了させる
  - NewsAPIとGoogle News RSSの並列実行を検証し、処理時間を短縮する
  - Claude APIのタイムアウト設定を最適化し、長時間待機を防止する
  - Vercel Serverless Functionsのメモリ設定を調整し、処理速度を向上させる
  - バッチ処理時間をログに記録し、5分以内であることを検証する
  - _Requirements: 1.8, 7.3_

### 11. データ管理機能実装

- [ ] 11.1 データクリーンアップバッチ実装
  - 毎日実行される`/api/batch/cleanup`エンドポイントを実装する
  - Firestore `news`コレクションから30日を超えるニュースを自動削除する
  - 削除対象のドキュメントを日付でクエリし、バッチ削除を実行する
  - 削除されたドキュメント数をログに記録する
  - 削除失敗時のエラーハンドリングとリトライロジックを実装する
  - _Requirements: 3.1, 3.2_

- [ ] 11.2 コスト監視機能実装
  - Firestoreの読み取り・書き込み回数をログに記録する
  - NewsAPIのリクエスト回数をカウントし、100リクエスト/日を超えないよう監視する
  - Claude APIのトークン使用量をログに記録する
  - 月間コストが1,000円を超える可能性がある場合にログに警告を出力する
  - コスト超過時にHaikuモデル優先使用を維持する設計を確認する
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

### 12. セキュリティ実装

- [ ] 12.1 環境変数とAPIキー管理実装
  - NewsAPIキー、Claude APIキー、Firebase秘密鍵を環境変数で管理する
  - `.env.example`ファイルを作成し、必要な環境変数を文書化する
  - コードベース内にAPIキーをハードコーディングしていないことを検証する
  - Vercel環境変数にすべてのAPIキーを安全に登録する
  - 環境変数が正しく読み込まれることをヘルスチェックエンドポイントで検証する
  - _Requirements: 9.1, 9.2_

- [ ] 12.2 通信セキュリティ実装
  - すべての外部API通信（NewsAPI、Google News RSS、Claude API）でHTTPSを使用する
  - 通信データを暗号化して送受信する（TLS 1.2以上）
  - API通信のタイムアウト設定を実装し、長時間接続を防止する
  - ユーザーの学習履歴を第三者と共有しないことをプライバシーポリシーで明記する
  - 外部サービスの利用規約を遵守していることを確認する
  - _Requirements: 9.3, 9.4, 9.5, 12.7_

### 13. テスト実装

- [ ] 13.1 (P) バックエンド単体テスト実装
  - AIサービス（ニュース要約、用語生成）の単体テストを実装する
  - ニュース取得サービス（NewsAPI、Google News RSS）のモックテストを実装する
  - エラーハンドリングとリトライロジックのテストを実装する
  - Firestore書き込み・読み込みのモックテストを実装する
  - テストカバレッジ80%以上を目標とする
  - _Requirements: 1.4, 1.5, 4.1, 4.2, 1.7_

- [ ] 13.2 (P) フロントエンド単体テスト実装
  - News ViewModel、Terms ViewModelの単体テストを実装する
  - News Repository、Terms Repositoryのモックテストを実装する
  - キャッシュマネージャーの読み書きテストを実装する
  - エラーハンドリングとリトライロジックのテストを実装する
  - テストカバレッジ80%以上を目標とする
  - _Requirements: 2.1, 5.1, 7.5_

- [ ] 13.3 バックエンド統合テスト実装
  - ニュースバッチ処理のエンドツーエンドテストを実装する
  - 用語バッチ処理のエンドツーエンドテストを実装する
  - Firestore読み書きの統合テストを実装する
  - Claude API統合テスト（実APIまたはモック）を実装する
  - バッチ処理の5分以内完了を検証する
  - _Requirements: 1.6, 4.5, 1.8_

- [ ] 13.4 フロントエンド統合テスト実装
  - ニュース表示フローのエンドツーエンドテストを実装する
  - 用語表示フローのエンドツーエンドテストを実装する
  - オフライン時のキャッシュ読み込みテストを実装する
  - タブ切り替えテストを実装する
  - パフォーマンステスト（起動3秒以内、キャッシュ1秒以内）を実装する
  - _Requirements: 2.1, 5.1, 2.5, 6.2, 7.1, 7.2_

- [ ] 13.5 E2Eテスト実装
  - iOS実機またはシミュレータでアプリ全体のE2Eテストを実装する
  - ニュース・用語の取得から表示までのフルフローをテストする
  - オフライン→オンライン切り替え時のデータ同期をテストする
  - エラー発生時のリトライボタン動作をテストする
  - ダークモード・ライトモード切り替えをテストする
  - _Requirements: 2.1, 5.1, 6.5, 7.5_

### 14. 可用性・安定性検証

- [ ] 14.1 バッチ処理の安定性検証
  - ニュース・用語バッチを連続7日間実行し、98%以上の成功率を達成することを検証する
  - バッチ失敗時のリトライ動作（最大3回）を検証する
  - 外部API障害（NewsAPI、Claude API）時のエラーハンドリングを検証する
  - エラーログがFirestoreに正しく記録されることを検証する
  - バッチ処理時間が5分以内であることを検証する
  - _Requirements: 8.2, 8.3, 8.5, 1.8_

- [ ] 14.2 アプリの安定性検証
  - iOS実機でアプリを連続使用し、クラッシュ率1%以下を達成することを検証する
  - メモリリークが発生しないことをXcode Instrumentsで検証する
  - ネットワーク障害時のエラーメッセージとリトライ機能を検証する
  - オフライン状態での動作安定性を検証する
  - iOS 14、15、16、17の各バージョンで動作検証を実施する
  - _Requirements: 8.1, 8.4, 7.4, 7.5_

### 15. システム統合とエンドツーエンド検証

- [ ] 15.1 バックエンドとフロントエンドの統合検証
  - バッチ処理でFirestoreに保存されたデータが、モバイルアプリで正しく表示されることを検証する
  - 毎日8:00にバッチ処理が実行され、同日中にアプリで新しいニュース・用語が閲覧可能であることを検証する
  - データクリーンアップバッチで30日超過データが削除され、アプリ側でエラーが発生しないことを検証する
  - オフライン→オンライン切り替え時にデータが自動同期されることを検証する
  - エラー発生時にバックエンドとフロントエンドの両方で適切にエラーが記録されることを検証する
  - _Requirements: 1.6, 2.1, 5.1, 3.2, 8.5_

- [ ] 15.2 運用コスト検証
  - 1日あたりのFirestore読み取り・書き込み回数を計測し、無料枠内であることを検証する
  - NewsAPIリクエスト回数が100リクエスト/日以内であることを検証する
  - Claude APIトークン使用量を計測し、月間コストを算出する
  - Vercel無料プランの制約（実行時間、帯域幅等）内で運用可能であることを検証する
  - 月間運用コストが1,000円以下であることを確認する
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ] 15.3 保守性・拡張性検証
  - コードベースがESLintルールに準拠していることを検証する
  - すべてのコンポーネントに適切なコメントとドキュメンテーションが含まれていることを確認する
  - 将来の機能拡張（ユーザー認証、過去履歴閲覧等）を追加する際の影響範囲を分析する
  - アーキテクチャがMVVM + Feature-based + Repositoryパターンに従っていることを確認する
  - Gitコミット履歴が適切に管理されていることを確認する
  - _Requirements: 11.1, 11.2, 11.4, 11.5_

## タスク間の依存関係

### 並列実行可能なタスク（Pマーク付き）
- **1.1, 1.2, 1.3**: プロジェクト初期セットアップは独立して実行可能
- **2.1, 2.2, 2.3**: 共通インフラストラクチャは並列実装可能
- **7.1, 7.2, 7.3**: フロントエンド共通レイヤーは並列実装可能
- **13.1, 13.2**: バックエンド・フロントエンドの単体テストは並列実装可能

### 順次実行が必要なタスク
- **3.1 → 3.2, 3.3**: AIサービス基盤が必要
- **4.1, 4.2 → 4.3**: ニュース取得機能が必要
- **5.1 → 5.2**: 重複チェック機能が必要
- **8.1 → 8.2 → 8.3**: Repository → ViewModel → Viewの順序が必要
- **9.1 → 9.2 → 9.3**: Repository → ViewModel → Viewの順序が必要
- **13.1, 13.2 → 13.3, 13.4 → 13.5**: 単体テスト → 統合テスト → E2Eテストの順序が必要
- **1〜14 → 15**: すべての実装完了後に統合検証を実施

## 要件カバレッジマトリクス

| Requirement | 対応タスク                                                                 |
| ----------- | -------------------------------------------------------------------------- |
| 1.1         | 4.3, 5.2, 6.1                                                              |
| 1.2         | 4.1, 13.1                                                                  |
| 1.3         | 4.2, 13.1                                                                  |
| 1.4         | 3.2, 4.3, 13.1                                                             |
| 1.5         | 3.2, 4.3, 13.1                                                             |
| 1.6         | 2.1, 4.3, 5.2, 13.3, 15.1                                                  |
| 1.7         | 2.2, 4.4, 5.3, 13.1                                                        |
| 1.8         | 4.3, 10.3, 13.3, 14.1                                                      |
| 2.1         | 8.1, 8.2, 8.3, 13.2, 13.4, 15.1                                            |
| 2.2         | 8.2, 8.3                                                                   |
| 2.3         | 8.3                                                                        |
| 2.4         | 8.1                                                                        |
| 2.5         | 1.2, 7.1, 8.1, 13.4                                                        |
| 2.6         | 2.3, 10.2                                                                  |
| 3.1         | 11.1                                                                       |
| 3.2         | 11.1, 15.1                                                                 |
| 3.3         | 2.1                                                                        |
| 3.4         | 6.1                                                                        |
| 4.1         | 3.3, 5.2                                                                   |
| 4.2         | 3.3, 5.2                                                                   |
| 4.3         | 5.1, 5.2                                                                   |
| 4.4         | 3.3, 5.2                                                                   |
| 4.5         | 2.1, 5.2, 13.3                                                             |
| 4.6         | 2.1, 5.2                                                                   |
| 5.1         | 9.1, 9.2, 9.3, 13.2, 13.4, 15.1                                            |
| 5.2         | 9.3                                                                        |
| 5.3         | 9.1, 9.2                                                                   |
| 5.4         | 9.1, 13.4                                                                  |
| 5.5         | 5.1                                                                        |
| 6.1         | 7.2                                                                        |
| 6.2         | 7.2, 13.4                                                                  |
| 6.3         | 8.3, 9.3                                                                   |
| 6.4         | 8.4, 9.4                                                                   |
| 6.5         | 7.2, 7.3, 8.4, 9.4, 13.5                                                   |
| 7.1         | 10.1, 13.4                                                                 |
| 7.2         | 10.2, 13.4                                                                 |
| 7.3         | 10.3                                                                       |
| 7.4         | 10.1, 14.2                                                                 |
| 7.5         | 2.2, 8.2, 8.3, 9.2, 9.3, 13.2, 13.5, 14.2                                  |
| 8.1         | 14.2                                                                       |
| 8.2         | 14.1                                                                       |
| 8.3         | 14.1                                                                       |
| 8.4         | 14.2                                                                       |
| 8.5         | 2.2, 14.1, 15.1                                                            |
| 9.1         | 1.3, 6.1, 12.1                                                             |
| 9.2         | 1.1, 12.1                                                                  |
| 9.3         | 3.1, 12.2                                                                  |
| 9.4         | 3.1, 12.2                                                                  |
| 9.5         | 12.2                                                                       |
| 10.1        | 11.2, 15.2                                                                 |
| 10.2        | 4.1, 11.2, 15.2                                                            |
| 10.3        | 3.1, 11.2, 15.2                                                            |
| 10.4        | 7.1, 11.2, 15.2                                                            |
| 10.5        | 11.2, 15.2                                                                 |
| 10.6        | 11.2                                                                       |
| 11.1        | 1.1, 15.3                                                                  |
| 11.2        | 15.3                                                                       |
| 11.3        | 2.2                                                                        |
| 11.4        | 1.1, 15.3                                                                  |
| 11.5        | 15.3                                                                       |
| 12.1        | 1.1                                                                        |
| 12.2        | 1.3                                                                        |
| 12.3        | 1.2, 7.1                                                                   |
| 12.4        | 6.1                                                                        |
| 12.5        | 3.1                                                                        |
| 12.6        | (iOS優先開発はプロジェクト全体で実施)                                     |
| 12.7        | 12.2                                                                       |

**カバレッジ確認**: 全12要件（Requirement 1〜12）の全受入基準が上記タスクに対応しています。

## 実装順序の推奨

1. **Phase 1: 基盤構築（1〜2週間）**
   - タスク 1.1〜1.3（プロジェクト初期セットアップ）
   - タスク 2.1〜2.3（共通インフラストラクチャ）
   - タスク 3.1（AIサービス基盤）

2. **Phase 2: バックエンド実装（2〜3週間）**
   - タスク 3.2〜3.3（AI処理機能）
   - タスク 4.1〜4.4（ニュースバッチ）
   - タスク 5.1〜5.3（用語バッチ）
   - タスク 6.1（Cron Jobs設定）

3. **Phase 3: フロントエンド実装（2〜3週間）**
   - タスク 7.1〜7.3（共通レイヤー）
   - タスク 8.1〜8.4（News Feature）
   - タスク 9.1〜9.4（Terms Feature）

4. **Phase 4: 最適化・セキュリティ（1週間）**
   - タスク 10.1〜10.3（パフォーマンス最適化）
   - タスク 11.1〜11.2（データ管理）
   - タスク 12.1〜12.2（セキュリティ）

5. **Phase 5: テスト・検証（2〜3週間）**
   - タスク 13.1〜13.5（テスト実装）
   - タスク 14.1〜14.2（安定性検証）
   - タスク 15.1〜15.3（統合検証）

**総所要時間**: 8〜12週間（約2〜3ヶ月）
